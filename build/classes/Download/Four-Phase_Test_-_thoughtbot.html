<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<meta content='IE=edge' http-equiv='X-UA-Compatible'>
<meta content='width=device-width,initial-scale=1' name='viewport'>
<meta content='NOODP' name='robots'>
<meta content='Articles by thoughtbot about design, Ruby on Rails, iOS, Android, and growth.' name='description'>
<link href='https://twitter.com/croaky' rel='author'>

<meta content='summary' name='twitter:card'>
<meta content='@thoughtbot' name='twitter:site'>
<meta content='https://robots.thoughtbot.com/four-phase-test' name='twitter:url'>
<meta content='Four-Phase Test' name='twitter:title'>
<meta content='The Four-Phase Test is a&#x000A;testing pattern, applicable to all programming...' name='twitter:description'>

<link rel="shortcut icon" type="image/x-icon" href="/assets/favicon-f2dbb21c91d2db85a5cb89a59e2b72cca851b16f03caffad1f8375cb8e957e0a.ico" />
<link rel="apple-touch-icon" type="image/x-icon" href="/assets/apple-touch-icon-f5660bd740993647d20c17d16b3fae2697e73d818752f2d4f3045e49d8b80153.png" />
<title>Four-Phase Test</title>
<link rel="stylesheet" media="all" href="/assets/application-d2ef5f92f21b97043b1a017f384074b2c50b8920812bee56a7d4091e5d576c4c.css" />

<link href='feed://feeds.feedburner.com/GiantRobotsSmashingIntoOtherGiantRobots' rel='alternate' type='application/rss+xml'>
</head>
<body>
<nav class='main'>
<a href="/"><svg xmlns="http://www.w3.org/2000/svg" width="257.6px" height="257.6px" viewBox="0 0 257.6 257.6" class="logo nav-logo" role="img" aria-labelledby="bx6wix4t9pxpwxnohrhrmms3wexsw2o"><title id="bx6wix4t9pxpwxnohrhrmms3wexsw2o">Blog home</title>
  <path fill="#ed3e44" d="M128.8,0C57.7,0,0,57.7,0,128.8c0,71.1,57.7,128.8,128.8,128.8c71.1,0,128.8-57.7,128.8-128.8     C257.6,57.7,199.9,0,128.8,0z"></path>
  <g fill="#fff">
    <path d="M95.6,137.3h-5.2v36.6h0c1.7,2.1,2.8,4.7,2.8,7.6c0,3.6-1.6,6.8-4.2,9l-3.2-3.2c1.8-1.3,2.9-3.4,2.9-5.8       c0-4-3.3-7.3-7.3-7.3c-4,0-7.3,3.3-7.3,7.3c0,2.4,1.1,4.5,2.9,5.8l-3.2,3.2c-2.5-2.2-4.2-5.4-4.2-9c0-2.9,1.1-5.6,2.8-7.6v-57       c0.1-2.2,1.9-4,4.1-4l104.5,0c2.2,0,4,1.8,4.1,4v57c1.8,2.1,2.8,4.7,2.8,7.6c0,3.6-1.6,6.8-4.2,9l-3.2-3.2       c1.7-1.3,2.9-3.4,2.9-5.8c0-4-3.3-7.3-7.3-7.3c-4,0-7.3,3.3-7.3,7.3c0,2.4,1.1,4.5,2.9,5.8l-3.2,3.2c-2.6-2.2-4.2-5.4-4.2-9       c0-2.9,1.1-5.6,2.8-7.6h0v-36.6H162v77.2l3.5,2v6.3h-35v-6.3l3.5-2h0V191h-10.4v23.4l3.5,2v6.3l-34.9,0.1v-6.3l3.4-2L95.6,137.3z"></path>
    <path d="M128.8,53.6c7.3,0,13.8,2.6,17.9,6.5l3.2-4.6c-5.1-4.5-12.6-7.4-21.1-7.4l0,0c-8.5,0-16.1,2.9-21.1,7.4       l3.2,4.6C114.9,56.2,121.5,53.6,128.8,53.6"></path>
    <g>
      <path d="M129,42c7.9,0,15.3,2.3,20.8,6.5c1.1,0.8,2.1,1.7,3,2.7l3.2-4.6c-6.2-6.1-16-10.1-27-10.1l0,0         c-11.3,0-21.3,4.1-27.5,10.5l3.2,4.6c1-1.1,2.1-2.2,3.4-3.2C113.7,44.3,121.1,42,129,42"></path>
    </g>
    <g>
      <path d="M128.8,30.8c12.6,0,23.7,4.6,30.3,11.6l3.2-4.5c-7.7-7.6-19.9-12.5-33.5-12.5l0,0         c-13.7,0-25.8,4.9-33.5,12.6l3.2,4.5C105,35.4,116.2,30.8,128.8,30.8"></path>
    </g>
    <g>
      <path d="M118.7,84.7c0,1.9-1.5,3.5-3.5,3.5c-1.9,0-3.5-1.6-3.5-3.5c0-1.9,1.6-3.5,3.5-3.5         C117.2,81.2,118.7,82.7,118.7,84.7z"></path>
      <path d="M155.3,66h-53.1c-2.2,0-4,1.8-4,4v34.6c0,2.2,1.8,4,4,4h53.1c2.2,0,4-1.8,4-4V70         C159.3,67.8,157.5,66,155.3,66z M115.3,91.4c-3.7,0-6.8-3-6.8-6.8c0-3.7,3-6.8,6.8-6.8c3.7,0,6.8,3,6.8,6.8         C122,88.4,119,91.4,115.3,91.4z M142.4,91.4c-3.7,0-6.8-3-6.8-6.8c0-3.7,3-6.8,6.8-6.8c3.7,0,6.8,3,6.8,6.8         C149.2,88.4,146.1,91.4,142.4,91.4z"></path>
      <path d="M145.9,84.7c0,1.9-1.6,3.5-3.5,3.5c-1.9,0-3.5-1.6-3.5-3.5c0-1.9,1.5-3.5,3.5-3.5         C144.3,81.2,145.9,82.7,145.9,84.7z"></path>
    </g>
  </g>
</svg>

</a><ul class='topic-nav'>
<li class='topic-nav-item'>
<a href="/tags">All Topics</a>
</li>
<li class='topic-nav-item'>
<a class="" href="/design">Design</a>
</li>
<li class='topic-nav-item'>
<a class="" href="/web">Web</a>
</li>
<li class='topic-nav-item'>
<a class="" href="/ios">iOS</a>
</li>
<li class='topic-nav-item'>
<a class="" href="/android">Android</a>
</li>
</ul>
</nav>


<div class='container'>
<article class='post text' data-url='/four-phase-test' role='main'>
<header>
<h1 class='title'>
Four-Phase Test
</h1>
<div class='meta'>
<div class='meta-author'>
<a href="/authors/dan-croak">Dan Croak</a>
</div>
<time class='meta-date' datetime='2012-09-28T00:00:00+00:00'>
September 28, 2012
</time>
<ul class='meta-tag-list'>
<li class='meta-tag-item'>
<a href="/tags/web">web</a>
</li>
<li class='meta-tag-item'>
<a href="/tags/ruby">ruby</a>
</li>
<li class='meta-tag-item'>
<a href="/tags/testing">testing</a>
</li>
</ul>

</div>

</header>
<div class='post-body'>
<p>The <a href="http://xunitpatterns.com/Four%20Phase%20Test.html">Four-Phase Test</a> is a
testing pattern, applicable to all programming languages and unit tests (not so
much integration tests).</p>

<p>It takes the following general form:</p>

<pre><code>test do&#x000A;  setup&#x000A;  exercise&#x000A;  verify&#x000A;  teardown&#x000A;end&#x000A;</code></pre>

<p>There are four distinct phases of the test. They are executed sequentially.</p>
<h2 id="setup">
  <a href="#setup">
    setup
  </a>
</h2>

<p>During setup, the system under test (usually a class, object, or method) is set up.</p>

<pre><code>user = User.new(password: &#39;password&#39;)&#x000A;</code></pre>
<h2 id="exercise">
  <a href="#exercise">
    exercise
  </a>
</h2>

<p>During exercise, the system under test is executed.</p>

<pre><code>user.save&#x000A;</code></pre>
<h2 id="verify">
  <a href="#verify">
    verify
  </a>
</h2>

<p>During verification, the result of the exercise is verified against the
developer&rsquo;s expectations.</p>

<pre><code>user.encrypted_password.should_not be_nil&#x000A;</code></pre>
<h2 id="teardown">
  <a href="#teardown">
    teardown
  </a>
</h2>

<p>During teardown, the system under test is reset to its pre-setup state.</p>

<p>This is usually handled implicitly by the language (releasing memory) or test
framework (running inside a database transaction).</p>
<h2 id="all-together">
  <a href="#all-together">
    all together
  </a>
</h2>

<p>The four phases are wrapped into a named test to be referenced individually.</p>

<p>Our <a href="https://github.com/thoughtbot/guides/tree/master/style">style guide</a>
advises we &ldquo;Separate setup, exercise, verification, and teardown phases with
newlines.&rdquo;</p>

<pre><code>it &#39;encrypts the password&#39; do&#x000A;  user = User.new(password: &#39;password&#39;)&#x000A;&#x000A;  user.save&#x000A;&#x000A;  user.encrypted_password.should_not be_nil&#x000A;end&#x000A;</code></pre>

<p>Go forth and test in phases.</p>

</div>
<ul class='share-post-list'>
<li class='share-network-item'>
<a class="social-share-network social-twitter" onClick="window.open(this.href, &#39;twitter-share&#39;, &#39;width=550,height=235&#39;);return false;" href="https://twitter.com/share?text=Four-Phase Test&amp;url=https://robots.thoughtbot.com/four-phase-test"><img alt="Twitter" src="/assets/social/twitter-1c76e0e598704d74bfe03d922e1b3cd8ac0dbdb57f434a52cbb5dbdd33b1b9d6.svg" width="15" height="15" />
</a></li>
<li class='share-network-item'>
<a class="social-share-network social-email" href="mailto:?body=Four-Phase%20Test%20-%20https%3A%2F%2Frobots.thoughtbot.com%2F%2Ffour-phase-test&amp;subject=Check%20out%20this%20blog%20post%20by%20thoughtbot"><img alt="Email" src="/assets/social/email-73feb6282fea7831aa8ee081923ef70fd67b11a88b94df48996a6943d8194c12.svg" width="16" height="10" />
</a></li>
</ul>

</article>

</div>
<section class='container'>
<div class='promoted'>
<div class='etc ad-hound'>
<img alt='hound' src='https://images.thoughtbot.com/blog/hound-logo.svg'>
<p>
<a href="https://houndci.com?utm_source=robots.thoughtbot.com&amp;utm_medium=referral&amp;utm_campaign=ad&amp;utm_term=https://robots.thoughtbot.com/four-phase-test">Hound</a>
automatically reviews JavaScript, Swift, Ruby, Python, Go,
CoffeeScript, and SCSS code
in your GitHub pull requests and comments on style violations.
It is free for open source repos and $12/month per private repo.
</p>
<p>
Give
<a href="https://houndci.com?utm_source=robots.thoughtbot.com&amp;utm_medium=referral&amp;utm_campaign=ad&amp;utm_term=https://robots.thoughtbot.com/four-phase-test">Hound</a>
a try on your next project.
</p>
</div>


</div>

</section>
<footer>
<section id='universal-footer'>
<div class='wrap'>
<div class='footer-nav'>
<ul>
<li class='title'>
Products
</li>
<li>
<a href="https://formkeep.com/">FormKeep
</a></li>
<li>
<a href="https://houndci.com/">Hound
</a></li>
<li>
<a href="http://kromatic.thoughtbot.com/">Kromatic
</a></li>
<li>
<a href="http://playroto.to">Rototo
</a></li>
<li>
<a href="http://sassquatch.thoughtbot.com/">Sassquatch
</a></li>
<li>
<a href="http://troposweather.com/">Tropos
</a></li>
<li>
<a href="https://thoughtbot.com/upcase">Upcase
</a></li>
</ul>
<ul>
<li class='title'>
Locations
</li>
<li>
<a href="https://thoughtbot.com/austin">Austin, TX
</a></li>
<li>
<a href="https://thoughtbot.com/boston">Boston, MA
</a></li>
<li>
<a href="https://thoughtbot.com/denver">Denver, CO
</a></li>
<li>
<a href="https://thoughtbot.com/london">London, UK
</a></li>
<li>
<a href="https://thoughtbot.com/new-york-city">New York, NY
</a></li>
<li>
<a href="https://thoughtbot.com/portland">Portland, OR
</a></li>
<li>
<a href="https://thoughtbot.com/raleigh">Raleigh, NC
</a></li>
<li>
<a href="https://thoughtbot.com/san-francisco">San Francisco, CA
</a></li>
<li>
<a href="https://thoughtbot.com/stockholm">Stockholm, SE
</a></li>
<li>
<a href="https://thoughtbot.com/washington-d-c">Washington, DC
</a></li>
</ul>
<ul>
<li class='title'>
Open Source
</li>
<li>
<a href="https://github.com/thoughtbot/Argo">Argo
</a></li>
<li>
<a href="http://bourbon.io">Bourbon
</a></li>
<li>
<a href="https://github.com/thoughtbot/capybara-webkit">Capybara Webkit
</a></li>
<li>
<a href="https://github.com/thoughtbot/clearance">Clearance
</a></li>
<li>
<a href="https://github.com/thoughtbot/dotfiles">Dotfiles
</a></li>
<li>
<a href="https://github.com/thoughtbot/factory_girl">Factory Girl
</a></li>
<li>
<a href="https://github.com/thoughtbot/laptop">Laptop
</a></li>
<li>
<a href="https://github.com/thoughtbot/Runes">Runes
</a></li>
<li>
<a href="https://github.com/thoughtbot/suspenders">Suspenders
</a></li>
<li>
<a href="https://github.com/thoughtbot">More...
</a></li>
</ul>
<ul>
<li class='title'>
Books
</li>
<li>
<a href="http://backbonejsonrails.com/">Backbone.js on Rails
</a></li>
<li>
<a href="http://designfortheweb.net/">Design for the Web
</a></li>
<li>
<a href="http://geocodingonrails.com/">Geocoding on Rails
</a></li>
<li>
<a href="http://goal-oriented-git.com/">Goal-Oriented Git
</a></li>
<li>
<a href="http://iosonrails.net/">iOS on Rails
</a></li>
<li>
<a href="http://maintaining-open-source.com/">Maintaining OSS
</a></li>
<li>
<a href="http://playbook.thoughtbot.com">Playbook
</a></li>
<li>
<a href="http://rubyscience.com/">Ruby Science
</a></li>
<li>
<a href="http://testingrailsbook.com/">Testing Rails
</a></li>
<li>
<a href="http://write-a-roguelike.com/">Write a Roguelike
</a></li>
</ul>
<ul>
<li class='title'>
Podcasts
</li>
<li>
<a href="http://bikeshed.fm/">The Bike Shed
</a></li>
<li>
<a href="http://buildphase.fm/">Build Phase
</a></li>
<li>
<a href="http://giantrobots.fm/">Giant Robots
</a></li>
<li>
<a href="http://tentative.fm/">Tentative
</a></li>
</ul>
</div>
</div>
</section>
</footer>
<div id='copyright-footer' role='contentinfo'>
<strong>&copy; 2016 thoughtbot, inc.</strong>
The design of a robot and thoughtbot are registered trademarks of
thoughtbot, inc.
<a href="//www.iubenda.com/privacy-policy/7827608">Privacy Policy</a>
</div>

<script src="/assets/application-a4a9a5b92c6ab8beec029f45ed7e447f8a2ad3bdc206d82b08a8e65316822828.js"></script>
<script src="//carnivalapp.io/sites/3/init.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    Carnival.init({
      article_author: "Dan Croak",
      article_selector: "article .post-body",
      block_selector: ":scope > p, :scope > pre, :scope li",
      onNewComment: function(comment) {
        [].slice.call(comment.element.querySelectorAll("pre code")).map(
          function(e) { hljs.highlightBlock(e); }
        );
      }
    });
  })
</script>

<script>
  window.analytics.load("wperrhev8f")
  window.analytics.page();
</script>

</body>
</html>
